<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produto</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../../assets/styles/cardProduct.css">
    <link rel="stylesheet" href="../../assets/styles/global.css">
    <link rel="stylesheet" href="../../assets/styles/header.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="container">
        <header id="pageHeader">
            <!-- ícone visível somente no mobile -->
            <button id="menuSwitch" onclick="openMenu()">
                <img src="../../assets/icons/list.svg" alt="Ícone Menu">
            </button>      
            
            <a href="../homePage/index.html">
                <img src="../../assets/images/logo1.png" alt="Droga ABC">
            </a>

            <div id="sideNavigationMenu" class="hide">
                <nav>
                    <a id="loginAnchor" href="../login/index.html">
                        <img src="../../assets/icons/log-in.svg" alt="Ícone Login">
                        <span>Entrar</span>
                    </a>
                    
                    <a href="../promotions/index.html">
                        <img src="../../assets/icons/percent.svg" alt="Ícone Porcentagem">
                        <span>Promoções</span>
                    </a>
                
                    <a href="../perfil/index.html">
                        <img src="../../assets/icons/user.svg" alt="Ícone Usuário">
                        <span>Área do Cliente</span>
                    </a>
                
                    <a href="../contact/index.html">
                        <img src="../../assets/icons/phone.svg" alt="Ícone Contato">
                        <span>Contato</span>
                    </a>
                
                    <a href="../aboutUs/index.html">
                        <img src="../../assets/icons/file-text.svg" alt="Ícone Sobre Nós">
                        <span>Sobre Nós</span>
                    </a>
                
                    <a id="signUpAnchor" href="../signUp/index.html">
                        <img src="../../assets/icons/user-plus.svg" alt="Ícone Cadastrar">
                        <span>Cadastre-se aqui</span>
                    </a>       
                    
                    <img src="../../assets/images/logoWithoutText.png" alt="Logo">
                    
                </nav>
            </div>
            <a href="../../pages/cart/index.html" >
                <img src="../../assets/icons/shopping-cart.svg" alt="Ícone Carrinho">
            </a>
        </header>

        <div id="content">
            <div id="product">
                <div id="imgContainer">
                    <img src="/" alt="Produto">
                </div>
                <div id="productDescription">
                    <h1></h1>
                    <span>código: <span> </span></span>
                    <div id="priceArea">
                        <div id="brand">
                            <strong>Marca: </strong>
                            <span></span>
                        </div>
                        <span id="oldPrice"></span>
                        <div id="priceAndStock">
                            <strong></strong>
                            <span>Estoque: <span></span></span>
                        </div>
                        <button>Comprar</button> 
                    </div>
                </div>
            </div>
            
            <h2>Outros produtos</h2>
            <div id="productsList"></div>

            <div id="scrolButtons">
                <button id="slideLeft" type="button" onclick="scrollToRight();">
                    <img src="../../assets/icons/arrow-left-circle.svg" alt="Left Arrow">
                </button>
                <button id="slideRight" type="button" onclick="scrollToLeft();">
                    <img src="../../assets/icons/arrow-right-circle.svg" alt="Right Arrow">
                </button>
            </div>
        </div>
        <footer>
            <p>Desenvolvido pelos alunos do curso de <br> Ciência da Computação Anhanguera 2020</p>
        </footer>
    </div>


    <script>
        function scrollToRight() {
            document.getElementById('productsList').scrollLeft -= 158;
        };

        function scrollToLeft() {
            document.getElementById('productsList').scrollLeft += 158;
        };

        let params = window.location.search;
        console.log(params)
        function parseOneParam(params){
            if(params){
                const keyAndValue = params.substring(1).split("=");

                if(keyAndValue[0] !== "code") return false;
                
                return keyAndValue;
            } 

            return false;
        }

        const parsedParams = parseOneParam(params);

        console.log("parsed" + parsedParams);
        
        window.onload = () => {
            findProducts('');

            if(parsedParams){
                console.log('request params finded');
                renderPage(parsedParams[1]);
            } else {
                location.replace("../homePage/index.html");
            }
        }

    </script>
    <script src="../../utils/renderProductPage.js"></script>
    <script src="../../utils/renderProductcard.js"></script>
    <script src="../../utils/products.js"></script>
    <script src="../../utils/headerMenuController.js"></script>
</body>
</html>